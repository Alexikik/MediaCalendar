@page "/Calendar"
@using System.ComponentModel
@using Syncfusion.EJ2.Blazor
@using Syncfusion.EJ2.Blazor.Schedule
@using Syncfusion.EJ2.Blazor.SplitButtons
@using Syncfusion.EJ2.Blazor.Calendars
@using MediaCalendar.Containers
@inherits CalendarBase

<h1>Media Calendar!</h1>

@if (loaded == false)
{
    <p><em>Loading...</em></p>
}
else
{
    <div>
        Movie name: <input type="text" style="margin-left:4px" id="movieName" name="movieName" @bind="movieName" /><br>
    </div>

    <button class="btn btn-primary" @onclick="AddMovie">Add movie</button>
    <p>@((MarkupString)addMovieResultString)</p>

    <div>
        Series name: <input type="text" style="margin-left:2px" id="seriesName" name="seriesName" @bind="seriesName" />
        Series IMDB id: <input type="text" style="margin-left:2px" id="seriesImdbId" name="seriesImdbId" @bind="seriesImdbId" /><br>
    </div>

    <button class="btn btn-primary" @onclick="AddSeriesViaName">Add series</button>
    <button class="btn btn-primary" @onclick="AddSeriesViaID">Add series via id</button>
    <p>@((MarkupString)addSeriesResultString)</p>

    <p>Number: @EpNum</p>
    <button class="btn btn-primary" @onclick="UpdateSchedule">Update Calendar</button>
    <button class="btn btn-primary" @onclick="ClearDatabase">Clear database</button>
    <button class="btn btn-primary" @onclick="UpdateAllSeriesInDB">Update all series</button>
    <p>@((MarkupString)clearDatabaseResultString)</p>
    <p>@((MarkupString)updatingEpisodes)</p>

    <EjsSchedule @ref="ScheduleObj"
                 TValue="AppointmentData"
                 Height=700px
                 Width="auto"
                 CurrentView="View.Month"
                 FirstDayOfWeek=1
                 RowAutoHeight="true">
        <ScheduleEventSettings DataSource="@DataSource"></ScheduleEventSettings>
    </EjsSchedule>
}